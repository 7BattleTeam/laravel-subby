<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plan Feature Model | Laravel Subby</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Laravel Subby is a flexible plans and subscription management system for Laravel.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/laravel-subby/assets/css/0.styles.a5e35d5d.css" as="style"><link rel="preload" href="/laravel-subby/assets/js/app.44d2a975.js" as="script"><link rel="preload" href="/laravel-subby/assets/js/2.a4b534a0.js" as="script"><link rel="preload" href="/laravel-subby/assets/js/42.70c07ba7.js" as="script"><link rel="prefetch" href="/laravel-subby/assets/js/10.b1fc92c4.js"><link rel="prefetch" href="/laravel-subby/assets/js/11.b984a28e.js"><link rel="prefetch" href="/laravel-subby/assets/js/12.c5763095.js"><link rel="prefetch" href="/laravel-subby/assets/js/13.8bfce408.js"><link rel="prefetch" href="/laravel-subby/assets/js/14.720c1402.js"><link rel="prefetch" href="/laravel-subby/assets/js/15.891f4aff.js"><link rel="prefetch" href="/laravel-subby/assets/js/16.a03c9f5f.js"><link rel="prefetch" href="/laravel-subby/assets/js/17.efe51d45.js"><link rel="prefetch" href="/laravel-subby/assets/js/18.729d04c2.js"><link rel="prefetch" href="/laravel-subby/assets/js/19.f2689a29.js"><link rel="prefetch" href="/laravel-subby/assets/js/20.019318dd.js"><link rel="prefetch" href="/laravel-subby/assets/js/21.29a4d5b3.js"><link rel="prefetch" href="/laravel-subby/assets/js/22.f0308ea7.js"><link rel="prefetch" href="/laravel-subby/assets/js/23.1aebc2ec.js"><link rel="prefetch" href="/laravel-subby/assets/js/24.8adaa360.js"><link rel="prefetch" href="/laravel-subby/assets/js/25.c686633a.js"><link rel="prefetch" href="/laravel-subby/assets/js/26.560f1af7.js"><link rel="prefetch" href="/laravel-subby/assets/js/27.791b1ee4.js"><link rel="prefetch" href="/laravel-subby/assets/js/28.fbc99285.js"><link rel="prefetch" href="/laravel-subby/assets/js/29.d6a5e575.js"><link rel="prefetch" href="/laravel-subby/assets/js/3.888caee7.js"><link rel="prefetch" href="/laravel-subby/assets/js/30.5e41982a.js"><link rel="prefetch" href="/laravel-subby/assets/js/31.064f0f3f.js"><link rel="prefetch" href="/laravel-subby/assets/js/32.2f011946.js"><link rel="prefetch" href="/laravel-subby/assets/js/33.47f12b0c.js"><link rel="prefetch" href="/laravel-subby/assets/js/34.49fb09d8.js"><link rel="prefetch" href="/laravel-subby/assets/js/35.0378f28e.js"><link rel="prefetch" href="/laravel-subby/assets/js/36.f92222f0.js"><link rel="prefetch" href="/laravel-subby/assets/js/37.864697b0.js"><link rel="prefetch" href="/laravel-subby/assets/js/38.344920dd.js"><link rel="prefetch" href="/laravel-subby/assets/js/39.87a3f924.js"><link rel="prefetch" href="/laravel-subby/assets/js/4.eb6494e0.js"><link rel="prefetch" href="/laravel-subby/assets/js/40.4aabf722.js"><link rel="prefetch" href="/laravel-subby/assets/js/41.0736ade8.js"><link rel="prefetch" href="/laravel-subby/assets/js/43.8edf7eb1.js"><link rel="prefetch" href="/laravel-subby/assets/js/44.ec5043a5.js"><link rel="prefetch" href="/laravel-subby/assets/js/45.f8f277e1.js"><link rel="prefetch" href="/laravel-subby/assets/js/46.638a484c.js"><link rel="prefetch" href="/laravel-subby/assets/js/47.cf857351.js"><link rel="prefetch" href="/laravel-subby/assets/js/48.3fa81892.js"><link rel="prefetch" href="/laravel-subby/assets/js/49.4c0dc239.js"><link rel="prefetch" href="/laravel-subby/assets/js/5.d0103934.js"><link rel="prefetch" href="/laravel-subby/assets/js/50.a7de39e2.js"><link rel="prefetch" href="/laravel-subby/assets/js/6.0f54e39b.js"><link rel="prefetch" href="/laravel-subby/assets/js/7.b8c14d16.js"><link rel="prefetch" href="/laravel-subby/assets/js/8.95d5e14d.js"><link rel="prefetch" href="/laravel-subby/assets/js/9.38182e4c.js">
    <link rel="stylesheet" href="/laravel-subby/assets/css/0.styles.a5e35d5d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/laravel-subby/" class="home-link router-link-active"><!----> <span class="site-name">Laravel Subby</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/laravel-subby/" class="nav-link">
  Home
</a></div> <a href="https://github.com/bpuig/laravel-subby" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/laravel-subby/" class="nav-link">
  Home
</a></div> <a href="https://github.com/bpuig/laravel-subby" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>The package</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-subby/v6.x/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/laravel-subby/v6.x/install/" class="sidebar-link">Installation</a></li><li><a href="/laravel-subby/v6.x/install/migrate-v6.html" class="sidebar-link">Upgrade v5.x to v6.x</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Models</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-subby/v6.x/models/" aria-current="page" class="sidebar-link">Models</a></li><li><a href="/laravel-subby/v6.x/models/plan-model.html" class="sidebar-link">Plan Model</a></li><li><a href="/laravel-subby/v6.x/models/plan-combination-model.html" class="sidebar-link">Plan Combination Model</a></li><li><a href="/laravel-subby/v6.x/models/plan-feature-model.html" aria-current="page" class="active sidebar-link">Plan Feature Model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-subby/v6.x/models/plan-feature-model.html#create-plan-features" class="sidebar-link">Create plan features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-subby/v6.x/models/plan-feature-model.html#sort-order" class="sidebar-link">Sort order</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-subby/v6.x/models/plan-feature-model.html#get-plan-feature-value" class="sidebar-link">Get Plan Feature value</a></li><li class="sidebar-sub-header"><a href="/laravel-subby/v6.x/models/plan-feature-model.html#feature-options" class="sidebar-link">Feature Options</a></li></ul></li><li><a href="/laravel-subby/v6.x/models/plan-subscription-model.html" class="sidebar-link">Plan Subscription Model</a></li><li><a href="/laravel-subby/v6.x/models/plan-subscription-feature-model.html" class="sidebar-link">Plan Subscription Feature Model</a></li><li><a href="/laravel-subby/v6.x/models/plan-subscription-schedule-model.html" class="sidebar-link">Plan Subscription Schedule Model</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Payments</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-subby/v6.x/payments/payment-services.html" class="sidebar-link">Payment services</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Jobs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-subby/v6.x/payments/jobs/subscription-payment-queuer-job.html" class="sidebar-link">Subscription Payment Queuer</a></li><li><a href="/laravel-subby/v6.x/payments/jobs/subscription-renewal-payment-job.html" class="sidebar-link">Subscription Payment</a></li><li><a href="/laravel-subby/v6.x/payments/jobs/subscription-schedule-payment-job.html" class="sidebar-link">Subscription Schedule Payment</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="plan-feature-model"><a href="#plan-feature-model" class="header-anchor">#</a> Plan Feature Model</h1> <p></p><div class="table-of-contents"><ul><li><a href="#create-plan-features">Create plan features</a><ul><li><a href="#sort-order">Sort order</a></li></ul></li><li><a href="#get-plan-feature-value">Get Plan Feature value</a></li><li><a href="#feature-options">Feature Options</a></li></ul></div><p></p> <p>This model relates to which features has a Plan. This features will be attached to every new subscription.</p> <h2 id="create-plan-features"><a href="#create-plan-features" class="header-anchor">#</a> Create plan features</h2> <p>Features are things that your plan allows subscribers to do. The obligatory fields are: <code>tag</code>, <code>name</code>, and <code>value</code>. The
value of the feature tells if or how many times the subscriber is allowed to use it. When setting a feature that should
be active or not, use written strings 'true' or 'false', otherwise use an integer to tell how many times it can be used.
If in the higher plan you want to give unlimited access to the &quot;counted&quot; feature, use 'true' as well. If you want the
usage of features to be reset on a regular basis, provide optional <code>resettable_period</code> and <code>resettable_interval</code> fields.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Bpuig<span class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Plan</span><span class="token punctuation">;</span>

<span class="token variable">$plan</span> <span class="token operator">=</span> <span class="token class-name static-context">Plan</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create multiple plan features at once</span>
<span class="token variable">$plan</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">saveMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tag'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'social_profiles'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Social profiles available'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'value'</span> <span class="token operator">=&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'sort_order'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tag'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'posts_per_social_profile'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Scheduled posts per profile'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'value'</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'sort_order'</span> <span class="token operator">=&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'resettable_period'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'resettable_interval'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'month'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tag'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'analytics'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Analytics'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'value'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'sort_order'</span> <span class="token operator">=&gt;</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="sort-order"><a href="#sort-order" class="header-anchor">#</a> Sort order</h3> <p><code>sort_order</code> column has no logic in package, it is just a field for you to use in your queries.</p> <h2 id="get-plan-feature-value"><a href="#get-plan-feature-value" class="header-anchor">#</a> Get Plan Feature value</h2> <p>Say you want to show the value of the feature <em>posts_per_social_profile</em> from above. You can do so in many ways:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Bpuig<span class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Plan</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Bpuig<span class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>PlanFeature</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Bpuig<span class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>PlanSubscription</span><span class="token punctuation">;</span>

<span class="token variable">$plan</span> <span class="token operator">=</span> <span class="token class-name static-context">Plan</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Use the plan instance to get feature's value</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token variable">$plan</span><span class="token operator">-&gt;</span><span class="token function">getFeatureByTag</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'posts_per_social_profile'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">value</span><span class="token punctuation">;</span>

<span class="token comment">// Query the feature itself directly</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">PlanFeature</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tag'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'posts_per_social_profile'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">value</span><span class="token punctuation">;</span>

<span class="token comment">// Get feature value through the subscription instance</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">PlanSubscription</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getFeatureValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'posts_per_social_profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="feature-options"><a href="#feature-options" class="header-anchor">#</a> Feature Options</h2> <p>Plan features are great for fine-tuning subscriptions, you can top up certain feature for X times of usage, so users may
then use it only for that amount. Features also have the ability to be resettable and then it's usage could be expired
too. See the following examples:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Bpuig<span class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>PlanFeature</span><span class="token punctuation">;</span>

<span class="token comment">// Find plan feature</span>
<span class="token variable">$feature</span> <span class="token operator">=</span> <span class="token class-name static-context">PlanFeature</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tag'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'posts_per_social_profile'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get feature reset date</span>
<span class="token variable">$feature</span><span class="token operator">-&gt;</span><span class="token function">getResetDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Carbon<span class="token punctuation">\</span>Carbon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/19/2022, 11:24:58 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/laravel-subby/v6.x/models/plan-combination-model.html" class="prev">
        Plan Combination Model
      </a></span> <span class="next"><a href="/laravel-subby/v6.x/models/plan-subscription-model.html">
        Plan Subscription Model
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/laravel-subby/assets/js/app.44d2a975.js" defer></script><script src="/laravel-subby/assets/js/2.a4b534a0.js" defer></script><script src="/laravel-subby/assets/js/42.70c07ba7.js" defer></script>
  </body>
</html>
